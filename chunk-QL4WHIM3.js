import{b as ue,c as fe,d as ye}from"./chunk-YEQBVLNF.js";import{$a as Q,Ga as ae,H as Z,Ha as oe,Ia as ie,Ja as D,Ka as g,L as b,La as C,Ma as E,Na as p,Oa as s,Pa as h,Q as f,Qa as l,R as y,Ra as m,Sa as H,Ta as $,Ua as F,Va as K,Wa as T,Xa as S,a as k,ab as i,b as I,ba as ee,bb as V,c as R,ca as te,cb as _,db as re,eb as ce,fb as le,gb as M,hb as N,ja as ne,kb as me,mb as pe,nb as v,ob as j,pa as r,rb as se,sb as de,yb as A,za as d}from"./chunk-EAOAK7RN.js";function _e(t,n){if(t&1&&(l(0,"li")(1,"b"),i(2," Tel "),l(3,"span",1),i(4),M(5,"number"),m()(),l(6,"span",5),i(7),m()()),t&2){let e=n.$implicit,a=n.$index;r(4),V(N(5,2,a+1)),r(3),V(e)}}var U=class t{contact=v.required();number=v(NaN,{transform:de});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-display-tel"]],hostAttrs:["role","section"],inputs:{contact:[1,"contact"],number:[1,"number"]},decls:16,vars:7,consts:[[1,"-cl-title"],[1,"-cl-label-no","app-cl-number"],[1,"-cl-data"],[1,"-cmp-tels-summary","app-cl-number"],[1,"-cmp-list"],[1,"-cl-data","app-cl-code"]],template:function(e,a){e&1&&(l(0,"header")(1,"div")(2,"h3",0)(3,"span"),i(4," Contact "),l(5,"span",1),i(6),M(7,"number"),m()(),l(8,"span",2),i(9),m()(),l(10,"span",3),i(11),M(12,"number"),m()()(),l(13,"ul",4),g(14,_e,8,4,"li",null,ie),m()),e&2&&(r(6),V(N(7,3,a.number())),r(3),V(a.contact().name),r(2),_("(",N(12,5,a.contact().tels.length),")"),r(3),C(a.contact().tels))},dependencies:[A],encapsulation:2,changeDetection:0})};function ve(t,n){if(t&1&&(p(0,"li"),h(1,"app-display-tel",4),s()),t&2){let e=n.$implicit,a=n.$index;r(),E("contact",e)("number",a+1)}}var O=class t{contacts=v.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-display-contact"]],inputs:{contacts:[1,"contacts"]},decls:12,vars:3,consts:[[1,"-cl-title"],[1,"-cl-float-right"],[1,"-cmp-contacts-summary","app-cl-number"],[1,"-cmp-list"],[3,"contact","number"]],template:function(e,a){e&1&&(p(0,"header")(1,"div")(2,"span")(3,"h2",0),i(4,"Contacts"),s()(),p(5,"span",1)(6,"span",2),i(7),M(8,"number"),s()()()(),p(9,"ul",3),g(10,ve,2,2,"li",null,D),s()),e&2&&(r(7),_("(",N(8,1,a.contacts().length),")"),r(3),C(a.contacts()))},dependencies:[U,A],encapsulation:2,changeDetection:0})};var xe="contact-data",P=class t{keyName=`${b(ne)}-${xe}`;get(){let n=localStorage.getItem(this.keyName);return JSON.parse(n??"null")}set(n){let e=JSON.stringify(n);localStorage.setItem(this.keyName,e)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})};function be(t,n){t&1&&h(0,"app-display-contact",0),t&2&&E("contacts",n)}function De(t,n){t&1&&(p(0,"p"),i(1,"Not Found"),s())}var W=class t{dataStorage=b(P);data=ee(this.dataStorage.get()??null);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-example-display-page"]],decls:2,vars:1,consts:[[3,"contacts"]],template:function(e,a){if(e&1&&ae(0,be,1,1,"app-display-contact",0)(1,De,2,0,"p"),e&2){let o;oe((o=a.data())?0:1,o)}},dependencies:[O],encapsulation:2,changeDetection:0})};var q=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-example-root"]],decls:9,vars:0,consts:[["routerLinkActive","app-st-active"],["routerLink","./display"],["routerLink","./update"]],template:function(e,a){e&1&&(p(0,"nav")(1,"ul")(2,"li",0)(3,"a",1),i(4,"Display"),s()(),p(5,"li",0)(6,"a",2),i(7,"Update"),s()()()(),h(8,"router-outlet"))},dependencies:[ue,fe,ye],encapsulation:2,changeDetection:0})};function Y(t){return{value:t??""}}function L(t){let{name:n,tels:e}=t??{name:"",tels:[""]};return{name:n,tels:e.map(a=>Y(a))}}function J(t){return(t??[void 0]).map(L)}function Ee(t){return t.value}function he(t){let{name:n,tels:e}=t;return{name:n,tels:e.map(Ee)}}function ge(t){return t.map(he)}function Te(t,n){if(t&1){let e=$();l(0,"li")(1,"label")(2,"b"),i(3),m(),l(4,"input",3,1),T("change",function(){let o=f(e).$index,c=Q(5),u=S();return y(u.changeTel(o,c.value))}),m()(),l(6,"button",4),T("click",function(){let o=f(e).$index,c=S();return y(c.removeTel(o))}),i(7,"X"),m()(),H(8,"br")}if(t&2){let e=n.$implicit,a=n.$index,o=n.$count;r(3),_("Tel ",a+1," "),r(),F("value",e.value),r(2),F("disabled",o===1)}}var X=class t{number=v(null);contact=j(L());removable=v(!0,{transform:se});remove=pe();changeName(n){this.contact.update(e=>I(k({},e),{name:n}))}addTel(){this.contact.update(n=>{let o=n,{tels:e}=o,a=R(o,["tels"]);return I(k({},a),{tels:[...e,Y()]})})}removeTel(n){this.contact.update(e=>{let c=e,{tels:a}=c,o=R(c,["tels"]);return I(k({},o),{tels:a.filter((u,B)=>B!==n)})})}changeTel(n,e){this.contact.update(a=>{let u=a,{tels:o}=u,c=R(u,["tels"]);return I(k({},c),{tels:o.map((B,Ce)=>(Ce===n&&(B.value=e),B))})})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-dynamic-tel"]],inputs:{number:[1,"number"],contact:[1,"contact"],removable:[1,"removable"]},outputs:{contact:"contactChange",remove:"remove"},decls:17,vars:4,consts:[["nameElem",""],["telElem",""],["type","button",3,"click"],["type","text",3,"change","value"],["type","button",3,"click","disabled"]],template:function(e,a){if(e&1){let o=$();l(0,"header")(1,"button",2),T("click",function(){return f(o),y(a.addTel())}),i(2,"+ Tel"),m(),H(3,"br")(4,"br"),l(5,"label")(6,"b"),i(7),m(),l(8,"input",3,0),T("change",function(){f(o);let u=Q(9);return y(a.changeName(u.value))}),m(),l(10,"span"),i(11),m()(),l(12,"button",4),T("click",function(){return f(o),y(a.remove.emit())}),i(13,"X"),m()(),l(14,"ul"),g(15,Te,9,3,null,null,D),m()}e&2&&(r(7),_("Contact ",a.number()),r(),F("value",a.contact().name),r(3),_("(",a.contact().tels.length,")"),r(),F("disabled",!a.removable()),r(3),C(a.contact().tels))},encapsulation:2,changeDetection:0})};function Se(t,n){if(t&1){let e=$();p(0,"li")(1,"app-dynamic-tel",1),K("contactChange",function(o){let c=f(e).$index,u=S();return y(u.changeContact(c,o))})("remove",function(){let o=f(e).$index,c=S();return y(c.removeContact(o))}),s()()}if(t&2){let e=n.$implicit,a=n.$index,o=n.$count;r(),E("number",a+1)("contact",e)("removable",o>1)}}var z=class t{contacts=j(J());addContact(){this.contacts.update(n=>[...n,L()])}changeContact(n,e){this.contacts.update(a=>a.map((o,c)=>(c===n&&(o.name=e.name,o.tels=e.tels),o)))}removeContact(n){this.contacts.update(e=>e.filter((a,o)=>o!==n))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-dynamic-contact"]],hostAttrs:["role","article"],inputs:{contacts:[1,"contacts"]},outputs:{contacts:"contactsChange"},decls:6,vars:0,consts:[["type","button",3,"click"],[3,"contactChange","remove","number","contact","removable"]],template:function(e,a){e&1&&(p(0,"header")(1,"button",0),K("click",function(){return a.addContact()}),i(2,"+ Contact"),s()(),p(3,"ul"),g(4,Se,2,3,"li",null,D),s()),e&2&&(r(4),C(a.contacts()))},dependencies:[X],encapsulation:2,changeDetection:0})};var G=class t{dataStorage=b(P);data=me(()=>J(this.dataStorage.get()??void 0));constructor(){te(()=>this.dataStorage.set(ge(this.data())))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-example-update-page"]],decls:1,vars:1,consts:[[3,"contactsChange","contacts"]],template:function(e,a){e&1&&(p(0,"app-dynamic-contact",0),le("contactsChange",function(c){return ce(a.data,c)||(a.data=c),c}),s()),e&2&&re("contacts",a.data)},dependencies:[z],encapsulation:2,changeDetection:0})};var _t=[{path:"",component:q,children:[{path:"",redirectTo:"display",pathMatch:"full"},{path:"display",component:W},{path:"update",component:G}]}];export{_t as default};
