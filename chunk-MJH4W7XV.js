import{H as F,Ja as f,Ka as v,L as P,La as y,Ma as L,Na as M,Oa as T,Q as d,Qa as c,R as p,Ra as s,Ta as S,Ua as g,Va as $,Wa as b,Xa as u,a as C,ab as m,b as I,ca as j,cb as x,gb as B,hb as R,jb as A,mb as J,nb as k,ob as D,pa as a,yb as O,za as _}from"./chunk-EAOAK7RN.js";function w(n=0){return{value:n}}function V(){return{numbers:[w()]}}function H(n){return n?{numbers:n.numbers.map(e=>({value:e.value}))}:V()}function K(n){return(n??[void 0]).map(H)}function X(n){return n.map(e=>e.numbers.map(t=>t.value))}function q(n){return n?n.map(e=>({numbers:e.map(t=>({value:t}))})):K()}function U(n,e){if(n&1){let t=S();c(0,"div",4),m(1),c(2,"input",7),b("change",function(o){let r=d(t).$index,l=u();return p(l.changeNumber(r,o.target.valueAsNumber))}),s(),c(3,"button",8),b("click",function(){d(t);let o=u();return p(o.addNumber())}),m(4,"+"),s(),c(5,"button",1),b("click",function(){let o=d(t).$index,r=u();return p(r.removeNumber(o))}),m(6," X "),s()()}if(n&2){let t=e.$implicit,i=e.$index,o=u();a(),x(" ",i+1,") "),a(),g("value",t.value),a(3),g("disabled",o.section().numbers.length===1)}}var h=class n{section=D(V());removable=k(!0);remove=J();number=k.required();total=A(()=>this.section().numbers.reduce((e,t)=>e+t.value,0));addNumber(){this.section.update(e=>I(C({},e),{numbers:[...e.numbers,w()]}))}removeNumber(e){this.section.update(t=>I(C({},t),{numbers:t.numbers.filter((i,o)=>o!==e)}))}changeNumber(e,t){this.section.update(i=>({numbers:i.numbers.map((r,l)=>l===e?{value:t}:r)}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["app-dynamic-input"]],inputs:{section:[1,"section"],removable:[1,"removable"],number:[1,"number"]},outputs:{section:"sectionChange",remove:"remove"},decls:13,vars:5,consts:[[1,"app-section-title"],[1,"remove-btn",3,"click","disabled"],[1,"app-input-number"],[1,"left"],[1,"mid"],[1,"right"],[1,"app-section-result"],["type","number",1,"app-input-number-item",3,"change","value"],[1,"app-add-btn",3,"click"]],template:function(t,i){t&1&&(c(0,"h2")(1,"span",0),m(2),s(),c(3,"button",1),b("click",function(){return i.remove.emit()}),m(4,"X"),s()(),c(5,"div",2)(6,"div",3),v(7,U,7,3,"div",4,f),s(),c(9,"div",5)(10,"div",6),m(11),B(12,"number"),s()()()),t&2&&(a(2),x("Section ",i.number()),a(),g("disabled",!i.removable()),a(4),y(i.section().numbers),a(4),x("Result ",R(12,3,i.total())))},dependencies:[O],encapsulation:2,changeDetection:0})};var G="ng-section-data",N=class n{set(e){localStorage.setItem(G,JSON.stringify(e))}get(){let e=localStorage.getItem(G);return e?JSON.parse(e):null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function W(n,e){if(n&1){let t=S();M(0,"app-dynamic-input",2),$("sectionChange",function(o){let r=d(t).$index,l=u();return p(l.changeSection(r,o))})("remove",function(){let o=d(t).$index,r=u();return p(r.removeSection(o))}),T()}if(n&2){let t=e.$implicit,i=e.$index,o=e.$count;L("number",i+1)("section",t)("removable",o>1)}}var E=class n{dataStorage=P(N);sections=D(q(this.dataStorage.get()));constructor(){j(()=>{this.dataStorage.set(X(this.sections()))})}addSection(){this.sections.update(e=>[...e,{numbers:[{value:0}]}])}removeSection(e){this.sections.update(t=>t.filter((i,o)=>o!==e))}changeSection(e,t){this.sections.update(i=>i.map((o,r)=>r===e?t:o))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["app-dynamic-section"]],inputs:{sections:[1,"sections"]},outputs:{sections:"sectionsChange"},decls:5,vars:0,consts:[[1,"app-add-btn",3,"click"],[3,"number","section","removable"],[3,"sectionChange","remove","number","section","removable"]],template:function(t,i){t&1&&(M(0,"nav")(1,"button",0),$("click",function(){return i.addSection()}),m(2,"Add Section"),T()(),v(3,W,1,3,"app-dynamic-input",1,f)),t&2&&(a(3),y(i.sections()))},dependencies:[h],encapsulation:2,changeDetection:0})};var _e=[{path:"",component:E}];export{_e as default};
